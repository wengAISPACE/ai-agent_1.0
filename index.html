
<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Personal Assistant</title>
  <link rel="manifest" href="manifest.json">
  <meta name="theme-color" content="#007bff" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin=""/>
  <link rel="stylesheet" href="index.css">
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>
  <script type="importmap">
    {
      "imports": {
        "@google/genai": "https://esm.sh/@google/genai@^0.12.0"
      }
    }
  </script>
<link rel="stylesheet" href="/index.css">
</head>
<body>
  <div id="app">
    <header class="app-header">
      <div class="header-main-line">
        <h1>AI 行動助理</h1>
        <button id="role-switch-button" class="role-switch-button" aria-haspopup="true" aria-expanded="false" aria-controls="role-selection-menu">
          <span id="role-display"></span>
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor"><path d="M7 10l5 5 5-5z"></path></svg>
        </button>
      </div>
      <p id="role-subtitle">您的貼身旅遊規劃師</p>
      <div id="role-selection-menu" class="role-selection-menu hidden" role="menu">
          <!-- Populated by JS -->
      </div>
    </header>
    <div id="user-status-bar" class="user-status-bar"></div>
    <main id="chat-container" class="chat-container" aria-live="polite"></main>
    <div id="loading" class="loading-indicator" role="status" aria-label="AI is thinking">
      <div class="dot"></div>
      <div class="dot"></div>
      <div class="dot"></div>
    </div>
    <footer class="input-area">
      <form id="chat-form">
        <textarea id="chat-input" placeholder="請告訴我您的旅遊計畫..." required rows="1"></textarea>
        <button type="button" id="mic-button" aria-label="Start voice input">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
            <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.49 6-3.31 6-6.72h-1.7z"></path>
          </svg>
        </button>
        <button type="submit" aria-label="Send message">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" width="24" height="24">
            <path d="M3.4 20.4l17.45-7.48a1 1 0 0 0 0-1.84L3.4 3.6a1 1 0 0 0-1.39 1.39L4.4 12l-2.4 7.41a1 1 0 0 0 1.4 1.4z"></path>
          </svg>
        </button>
      </form>
    </footer>
  </div>
  <script type="module" src="index.tsx"></script>
<script type="module" src="/index.tsx"></script>
</body>
</html>